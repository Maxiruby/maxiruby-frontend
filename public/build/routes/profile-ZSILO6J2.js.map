{
  "version": 3,
  "sources": ["../../../app/routes/profile.tsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/routes/profile.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/routes/profile.tsx\");\n  import.meta.hot.lastModified = \"1695573175794.8076\";\n}\n// REMIX HMR END\n\nimport { Form, useNavigate } from \"@remix-run/react\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\n\n// components\nimport { Container, Section } from \"~/components/Layout\";\nimport Button from \"~/components/shared/Button\";\nimport Input from \"~/components/shared/Input\";\nexport const meta = () => {\n  return [{\n    title: \"Profile \u2014 Maxiruby\"\n  }, {\n    name: \"description\",\n    content: \"Profile \u2014 Maxiruby\"\n  }];\n};\nexport default function Profile() {\n  _s();\n  const navigate = useNavigate();\n  //@ts-ignore\n  const profile = JSON.parse(localStorage?.getItem(\"profile\"));\n  const {\n    user\n  } = useSelector(user => ({\n    ...user\n  }));\n  const [username, setUsername] = useState(profile?.username);\n  const [surname, setSurname] = useState(profile?.surname);\n  const [success, setSuccess] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [password, setPassword] = useState(\"\");\n  const handleUpdateProfile = async () => {\n    setLoading(true);\n    try {\n      var myHeaders = new Headers();\n      myHeaders.append(\"Content-Type\", \"application/json\");\n      var raw = JSON.stringify({\n        username,\n        surname\n      });\n      myHeaders.append(\"Authorization\", \"Bearer \" + user.token);\n      var requestOptions = {\n        method: \"POST\",\n        headers: myHeaders,\n        body: raw,\n        redirect: \"follow\"\n      };\n      const response = fetch(\"https://api.maxiruby.com/api/users/auth/update\", requestOptions);\n      const data = await (await response).json();\n      setLoading(false);\n      localStorage.setItem(\"profile\", JSON.stringify(data.result.user));\n      setSuccess(\"Profile updated successfully\");\n      setTimeout(() => {\n        setSuccess(\"\");\n      }, 2000);\n      setError(\"\");\n    } catch (error) {\n      setError(error.message);\n      setLoading(false);\n      setSuccess(\"\");\n    }\n  };\n  const handleChangePassword = async () => {\n    setSuccess(\"\");\n    setError(\"\");\n    setLoading(true);\n    if (!password) {\n      setError(\"Password is required\");\n      setTimeout(() => {\n        setError(\"\");\n        setLoading(false);\n      }, 2000);\n      return;\n    }\n    try {\n      var myHeaders = new Headers();\n      myHeaders.append(\"Content-Type\", \"application/json\");\n      var raw = JSON.stringify({\n        newpassword: password\n      });\n      myHeaders.append(\"Authorization\", \"Bearer \" + user.token);\n      var requestOptions = {\n        method: \"POST\",\n        headers: myHeaders,\n        body: raw,\n        redirect: \"follow\"\n      };\n      const response = fetch(\"https://api.maxiruby.com/api/users/auth/resetpassword\", requestOptions);\n      const data = await (await response).json();\n      setSuccess(\"Profile updated successfully\");\n      setTimeout(() => {\n        setSuccess(\"\");\n        localStorage.removeItem(\"profile\");\n        localStorage.removeItem(\"token\");\n        navigate(\"/login\");\n      }, 2000);\n      setError(\"\");\n    } catch (error) {\n      setLoading(false);\n      setError(error.message);\n      setSuccess(\"\");\n    }\n  };\n  const {\n    users\n  } = useSelector(user => ({\n    ...user\n  }));\n  let userData = Cookies.get(\"user\");\n  userData = JSON.parse(userData);\n  const gerUSer = async () => {\n    if (!users) return;\n    try {\n      const {\n        data\n      } = await axios.get(`https://api.maxiruby.com/api/users/auth`, {\n        headers: {\n          Authorization: `Bearer ${userData.token}`\n        }\n      });\n      localStorage.setItem(\"profile\", JSON.stringify(data.result));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  useEffect(() => {\n    gerUSer();\n  }, []);\n  return <div className=\"flex flex-1 flex-col h-full min-h-[75vh]\">\n      <Section>\n        <Container>\n          <div className=\"flex flex-1 flex-col gap-y-12\">\n            <header className=\"flex flex-1 flex-col items-center justify-center\">\n              <h1 className=\"text-3xl font-medium font-heading\">\n                Profile Settings\n              </h1>\n            </header>\n\n            <main className=\"flex flex-1 flex-col items-center justify-center\">\n              <Form className=\"flex flex-1 w-full max-w-[720px] mx-auto\">\n                <FormField>\n                  <FormRow>\n                    <FormGroup>\n                      <FormLabel optional>Username</FormLabel>\n                      <Input type=\"text\" value={username} placeholder=\"Name\" onChange={e => {\n                      setUsername(e.target.value);\n                    }} className=\"w-full min-w-[160px]\" />\n                    </FormGroup>\n\n                    <FormGroup>\n                      <FormLabel optional>Surname</FormLabel>\n                      <Input type=\"text\" value={surname} placeholder=\"Surname\" onChange={e => {\n                      setSurname(e.target.value);\n                    }} className=\"w-full min-w-[200px]\" />\n                    </FormGroup>\n                  </FormRow>\n\n                  <FormGroup>\n                    <FormLabel>Email Adress</FormLabel>\n                    <Input type=\"text\" value=\"\" placeholder={profile?.email} onChange={() => {}} className=\"w-full min-w-[200px]\" />\n                  </FormGroup>\n\n                  <FormGroup>\n                    <FormLabel>Password</FormLabel>\n                    <div className=\"flex flex-1 items-stretch flex-wrap gap-4\">\n                      <Input type=\"password\" value={password} placeholder=\"********\" onChange={e => {\n                      setPassword(e.target.value);\n                    }} className=\"flex flex-[5] min-w-[200px]\" />\n\n                      <Button type=\"button\" title=\"Reset Password\" variant=\"border\" className=\"flex-[1] min-w-[200px]\" onClick={handleChangePassword} disabled={loading}>\n                        {loading ? \"Loading...\" : \"Reset Password\"}\n                      </Button>\n                    </div>\n                  </FormGroup>\n                  {success ? <small style={{\n                  color: \"green\"\n                }}> {success}</small> : null}\n                  {error ? <small style={{\n                  color: \"red\"\n                }}> {error}</small> : null}\n                  <FormGroup>\n                    <Button onClick={handleUpdateProfile} disabled={loading} type=\"button\" title=\"Save Changes\" variant=\"primary\" className=\"w-fit mx-auto px-8\">\n                      {loading ? \"Loading...\" : \"Save Changes\"}\n                    </Button>\n                  </FormGroup>\n                </FormField>\n              </Form>\n            </main>\n          </div>\n        </Container>\n      </Section>\n    </div>;\n}\n_s(Profile, \"MXMLRlXiTQA3tvBqVSU0eGVonwA=\", false, function () {\n  return [useNavigate, useSelector, useSelector];\n});\n_c = Profile;\nfunction FormField({\n  children\n}) {\n  return <div className=\"flex flex-1 flex-col justify-center items-center gap-y-6\">\n      {children}\n    </div>;\n}\n_c2 = FormField;\nfunction FormGroup({\n  children\n}) {\n  return <div className=\"flex flex-1 flex-col gap-y-2 w-full\">{children}</div>;\n}\n_c3 = FormGroup;\nfunction FormRow({\n  children\n}) {\n  return <div className=\"flex flex-1 flex-row flex-wrap gap-4 w-full\">\n      {children}\n    </div>;\n}\n_c4 = FormRow;\nfunction FormLabel({\n  children,\n  optional = false\n}) {\n  return <label className=\"flex flex-1 flex-row items-center gap-x-1\">\n      <span className=\"text-sm font-semibold text-foreground\">{children}</span>\n      {optional && <span className=\"text-xs font-medium text-muted-foreground\">\n          (Optional)\n        </span>}\n    </label>;\n}\n_c5 = FormLabel;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"Profile\");\n$RefreshReg$(_c2, \"FormField\");\n$RefreshReg$(_c3, \"FormGroup\");\n$RefreshReg$(_c4, \"FormRow\");\n$RefreshReg$(_c5, \"FormLabel\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,IAAAA,gBAAoC;AAqItB;AA5Jd,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,6BAA+B,EAAE;AAAA,EAC1E;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAI,KAAK,aAAa;AAEtB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAwB;AACxB,cAAY,IAAI,eAAe;AACjC;AAaO,IAAM,OAAO,MAAM;AACxB,SAAO,CAAC;AAAA,IACN,OAAO;AAAA,EACT,GAAG;AAAA,IACD,MAAM;AAAA,IACN,SAAS;AAAA,EACX,CAAC;AACH;AACe,SAAR,UAA2B;AAChC,KAAG;AACH,QAAM,WAAW,YAAY;AAE7B,QAAM,UAAU,KAAK,MAAM,cAAc,QAAQ,SAAS,CAAC;AAC3D,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,YAAY,CAAAC,WAAS;AAAA,IACvB,GAAGA;AAAA,EACL,EAAE;AACF,QAAM,CAAC,UAAU,WAAW,QAAI,wBAAS,SAAS,QAAQ;AAC1D,QAAM,CAAC,SAAS,UAAU,QAAI,wBAAS,SAAS,OAAO;AACvD,QAAM,CAAC,SAAS,UAAU,QAAI,wBAAS,EAAE;AACzC,QAAM,CAAC,OAAO,QAAQ,QAAI,wBAAS,EAAE;AACrC,QAAM,CAAC,SAAS,UAAU,QAAI,wBAAS,KAAK;AAC5C,QAAM,CAAC,UAAU,WAAW,QAAI,wBAAS,EAAE;AAC3C,QAAM,sBAAsB,YAAY;AACtC,eAAW,IAAI;AACf,QAAI;AACF,UAAI,YAAY,IAAI,QAAQ;AAC5B,gBAAU,OAAO,gBAAgB,kBAAkB;AACnD,UAAI,MAAM,KAAK,UAAU;AAAA,QACvB;AAAA,QACA;AAAA,MACF,CAAC;AACD,gBAAU,OAAO,iBAAiB,YAAY,KAAK,KAAK;AACxD,UAAI,iBAAiB;AAAA,QACnB,QAAQ;AAAA,QACR,SAAS;AAAA,QACT,MAAM;AAAA,QACN,UAAU;AAAA,MACZ;AACA,YAAM,WAAW,MAAM,kDAAkD,cAAc;AACvF,YAAM,OAAO,OAAO,MAAM,UAAU,KAAK;AACzC,iBAAW,KAAK;AAChB,mBAAa,QAAQ,WAAW,KAAK,UAAU,KAAK,OAAO,IAAI,CAAC;AAChE,iBAAW,8BAA8B;AACzC,iBAAW,MAAM;AACf,mBAAW,EAAE;AAAA,MACf,GAAG,GAAI;AACP,eAAS,EAAE;AAAA,IACb,SAASC,QAAP;AACA,eAASA,OAAM,OAAO;AACtB,iBAAW,KAAK;AAChB,iBAAW,EAAE;AAAA,IACf;AAAA,EACF;AACA,QAAM,uBAAuB,YAAY;AACvC,eAAW,EAAE;AACb,aAAS,EAAE;AACX,eAAW,IAAI;AACf,QAAI,CAAC,UAAU;AACb,eAAS,sBAAsB;AAC/B,iBAAW,MAAM;AACf,iBAAS,EAAE;AACX,mBAAW,KAAK;AAAA,MAClB,GAAG,GAAI;AACP;AAAA,IACF;AACA,QAAI;AACF,UAAI,YAAY,IAAI,QAAQ;AAC5B,gBAAU,OAAO,gBAAgB,kBAAkB;AACnD,UAAI,MAAM,KAAK,UAAU;AAAA,QACvB,aAAa;AAAA,MACf,CAAC;AACD,gBAAU,OAAO,iBAAiB,YAAY,KAAK,KAAK;AACxD,UAAI,iBAAiB;AAAA,QACnB,QAAQ;AAAA,QACR,SAAS;AAAA,QACT,MAAM;AAAA,QACN,UAAU;AAAA,MACZ;AACA,YAAM,WAAW,MAAM,yDAAyD,cAAc;AAC9F,YAAM,OAAO,OAAO,MAAM,UAAU,KAAK;AACzC,iBAAW,8BAA8B;AACzC,iBAAW,MAAM;AACf,mBAAW,EAAE;AACb,qBAAa,WAAW,SAAS;AACjC,qBAAa,WAAW,OAAO;AAC/B,iBAAS,QAAQ;AAAA,MACnB,GAAG,GAAI;AACP,eAAS,EAAE;AAAA,IACb,SAASA,QAAP;AACA,iBAAW,KAAK;AAChB,eAASA,OAAM,OAAO;AACtB,iBAAW,EAAE;AAAA,IACf;AAAA,EACF;AACA,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,YAAY,CAAAD,WAAS;AAAA,IACvB,GAAGA;AAAA,EACL,EAAE;AACF,MAAI,WAAW,IAAQ,IAAI,MAAM;AACjC,aAAW,KAAK,MAAM,QAAQ;AAC9B,QAAM,UAAU,YAAY;AAC1B,QAAI,CAAC;AAAO;AACZ,QAAI;AACF,YAAM;AAAA,QACJ;AAAA,MACF,IAAI,MAAM,cAAM,IAAI,2CAA2C;AAAA,QAC7D,SAAS;AAAA,UACP,eAAe,UAAU,SAAS;AAAA,QACpC;AAAA,MACF,CAAC;AACD,mBAAa,QAAQ,WAAW,KAAK,UAAU,KAAK,MAAM,CAAC;AAAA,IAC7D,SAASC,QAAP;AACA,cAAQ,IAAIA,MAAK;AAAA,IACnB;AAAA,EACF;AACA,+BAAU,MAAM;AACd,YAAQ;AAAA,EACV,GAAG,CAAC,CAAC;AACL,SAAO,mDAAC,SAAI,WAAU,4CAClB,6DAAC,WACC,6DAAC,aACC,6DAAC,SAAI,WAAU,iCACb;AAAA,uDAAC,YAAO,WAAU,oDAChB,6DAAC,QAAG,WAAU,qCAAoC,gCAAlD;AAAA;AAAA;AAAA;AAAA,WAEA,KAHF;AAAA;AAAA;AAAA;AAAA,WAIA;AAAA,IAEA,mDAAC,UAAK,WAAU,oDACd,6DAAC,QAAK,WAAU,4CACd,6DAAC,aACC;AAAA,yDAAC,WACC;AAAA,2DAAC,aACC;AAAA,6DAAC,aAAU,UAAQ,MAAC,wBAApB;AAAA;AAAA;AAAA;AAAA,iBAA4B;AAAA,UAC5B,mDAAC,iBAAM,MAAK,QAAO,OAAO,UAAU,aAAY,QAAO,UAAU,OAAK;AACtE,wBAAY,EAAE,OAAO,KAAK;AAAA,UAC5B,GAAG,WAAU,0BAFX;AAAA;AAAA;AAAA;AAAA,iBAEkC;AAAA,aAJpC;AAAA;AAAA;AAAA;AAAA,eAKA;AAAA,QAEA,mDAAC,aACC;AAAA,6DAAC,aAAU,UAAQ,MAAC,uBAApB;AAAA;AAAA;AAAA;AAAA,iBAA2B;AAAA,UAC3B,mDAAC,iBAAM,MAAK,QAAO,OAAO,SAAS,aAAY,WAAU,UAAU,OAAK;AACxE,uBAAW,EAAE,OAAO,KAAK;AAAA,UAC3B,GAAG,WAAU,0BAFX;AAAA;AAAA;AAAA;AAAA,iBAEkC;AAAA,aAJpC;AAAA;AAAA;AAAA;AAAA,eAKA;AAAA,WAbF;AAAA;AAAA;AAAA;AAAA,aAcA;AAAA,MAEA,mDAAC,aACC;AAAA,2DAAC,aAAU,4BAAX;AAAA;AAAA;AAAA;AAAA,eAAuB;AAAA,QACvB,mDAAC,iBAAM,MAAK,QAAO,OAAM,IAAG,aAAa,SAAS,OAAO,UAAU,MAAM;AAAA,QAAC,GAAG,WAAU,0BAAvF;AAAA;AAAA;AAAA;AAAA,eAA8G;AAAA,WAFhH;AAAA;AAAA;AAAA;AAAA,aAGA;AAAA,MAEA,mDAAC,aACC;AAAA,2DAAC,aAAU,wBAAX;AAAA;AAAA;AAAA;AAAA,eAAmB;AAAA,QACnB,mDAAC,SAAI,WAAU,6CACb;AAAA,6DAAC,iBAAM,MAAK,YAAW,OAAO,UAAU,aAAY,YAAW,UAAU,OAAK;AAC9E,wBAAY,EAAE,OAAO,KAAK;AAAA,UAC5B,GAAG,WAAU,iCAFX;AAAA;AAAA;AAAA;AAAA,iBAEyC;AAAA,UAEzC,mDAAC,kBAAO,MAAK,UAAS,OAAM,kBAAiB,SAAQ,UAAS,WAAU,0BAAyB,SAAS,sBAAsB,UAAU,SACvI,oBAAU,eAAe,oBAD5B;AAAA;AAAA;AAAA;AAAA,iBAEA;AAAA,aAPF;AAAA;AAAA;AAAA;AAAA,eAQA;AAAA,WAVF;AAAA;AAAA;AAAA;AAAA,aAWA;AAAA,MACC,UAAU,mDAAC,WAAM,OAAO;AAAA,QACzB,OAAO;AAAA,MACT,GAAG;AAAA;AAAA,QAAE;AAAA,WAFQ;AAAA;AAAA;AAAA;AAAA,aAEA,IAAW;AAAA,MACrB,QAAQ,mDAAC,WAAM,OAAO;AAAA,QACvB,OAAO;AAAA,MACT,GAAG;AAAA;AAAA,QAAE;AAAA,WAFM;AAAA;AAAA;AAAA;AAAA,aAEA,IAAW;AAAA,MACpB,mDAAC,aACC,6DAAC,kBAAO,SAAS,qBAAqB,UAAU,SAAS,MAAK,UAAS,OAAM,gBAAe,SAAQ,WAAU,WAAU,sBACrH,oBAAU,eAAe,kBAD5B;AAAA;AAAA;AAAA;AAAA,aAEA,KAHF;AAAA;AAAA;AAAA;AAAA,aAIA;AAAA,SA5CF;AAAA;AAAA;AAAA;AAAA,WA6CA,KA9CF;AAAA;AAAA;AAAA;AAAA,WA+CA,KAhDF;AAAA;AAAA;AAAA;AAAA,WAiDA;AAAA,OAxDF;AAAA;AAAA;AAAA;AAAA,SAyDA,KA1DF;AAAA;AAAA;AAAA;AAAA,SA2DA,KA5DF;AAAA;AAAA;AAAA;AAAA,SA6DA,KA9DG;AAAA;AAAA;AAAA;AAAA,SA+DL;AACJ;AACA,GAAG,SAAS,gCAAgC,OAAO,WAAY;AAC7D,SAAO,CAAC,aAAa,aAAa,WAAW;AAC/C,CAAC;AACD,KAAK;AACL,SAAS,UAAU;AAAA,EACjB;AACF,GAAG;AACD,SAAO,mDAAC,SAAI,WAAU,4DACjB,YADE;AAAA;AAAA;AAAA;AAAA,SAEL;AACJ;AACA,MAAM;AACN,SAAS,UAAU;AAAA,EACjB;AACF,GAAG;AACD,SAAO,mDAAC,SAAI,WAAU,uCAAuC,YAAtD;AAAA;AAAA;AAAA;AAAA,SAA+D;AACxE;AACA,MAAM;AACN,SAAS,QAAQ;AAAA,EACf;AACF,GAAG;AACD,SAAO,mDAAC,SAAI,WAAU,+CACjB,YADE;AAAA;AAAA;AAAA;AAAA,SAEL;AACJ;AACA,MAAM;AACN,SAAS,UAAU;AAAA,EACjB;AAAA,EACA,WAAW;AACb,GAAG;AACD,SAAO,mDAAC,WAAM,WAAU,6CACpB;AAAA,uDAAC,UAAK,WAAU,yCAAyC,YAAzD;AAAA;AAAA;AAAA;AAAA,WAAkE;AAAA,IACjE,YAAY,mDAAC,UAAK,WAAU,6CAA4C,0BAA5D;AAAA;AAAA;AAAA;AAAA,WAEX;AAAA,OAJC;AAAA;AAAA;AAAA;AAAA,SAKL;AACJ;AACA,MAAM;AACN,IAAI;AAAJ,IAAQ;AAAR,IAAa;AAAb,IAAkB;AAAlB,IAAuB;AACvB,aAAa,IAAI,SAAS;AAC1B,aAAa,KAAK,WAAW;AAC7B,aAAa,KAAK,WAAW;AAC7B,aAAa,KAAK,SAAS;AAC3B,aAAa,KAAK,WAAW;AAE7B,OAAO,eAAe;AACtB,OAAO,eAAe;",
  "names": ["import_react", "user", "error"]
}
